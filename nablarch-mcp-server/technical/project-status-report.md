# nablarch-mcp-server プロジェクト現状レポート


**作成日**: 2026-02-11

---

## 1. プロジェクト現状

### Phase進捗

| Phase | 状態 | タスク完了率 | 備考 |
|-------|------|------------|------|
| Phase 1: MCP基盤 + 静的知識 | ✅ 完了 | 28/28 (100%) | PR #1〜#7, #26 |
| Phase 2: RAGエンジン統合 | ✅ 完了 | 34/34 (100%) | PR #8〜#25 |
| Phase 3: ツール拡充 + コード生成 | ✅ 完了 | 37/37 (100%) | PR #29〜#61 |
| Phase 4: 本番デプロイ | 🔵 計画策定済み・着手保留 | 0/42 (0%) | Phase 4計画で42タスクに再構築 |
| **合計** | — | **99/141** | **70%** |

### 品質指標

| 指標 | 値 | 備考 |
|------|-----|------|
| テスト総数 | 941 | `mvn test` 2026-02-11実行 |
| テスト成功 | 927 | — |
| テスト失敗 | 0 | — |
| テストスキップ | 14 | DB統合テスト・ONNXモデル関連 |
| Checkstyle違反 | 0 | — |
| SpotBugs警告 | 4件 | 既存Medium警告（段階的解消予定） |
| CI/CD | ✅ 導入済み | GitHub Actions（P0/P1改善） |

### MCPプリミティブ

| プリミティブ | 数量 | 状態 |
|-------------|------|------|
| Tools | 10個 | 全て実装・登録済み |
| Resources | 8 URIパターン | 全て実装・登録済み |
| Prompts | 6テンプレート | 全て実装済み |

### 知識データカバレッジ

| 指標 | 値 | 備考 |
|------|-----|------|
| 知識YAMLファイル | 17ファイル | 知識カバレッジ監査で10→17に拡充 |
| ライブラリカバレッジ | 85% | データバインド等ライブラリ系を網羅的に追加 |
| NablarchKnowledgeBase検索対象 | 7ファイル（main）/ 14ファイル（PR#74） | 精度評価タスクで拡張中 |
| Agent Skills | 6件 | .claude/skills/配下（Agent Skills設計） |

---

## 2. 完了済みの主要マイルストーン

### Phase 1〜3（コア機能完了）
- MCP基盤構築（Spring Boot 3.4.x + MCP Java SDK 0.17.x）
- RAGエンジン統合（pgvector + Jina v4 + Voyage-code-3 + Cross-Encoder）
- ツール10個、Resource 8種、Prompt 6種の完全実装
- 全12ユースケースのテスト完了
- Streamable HTTPトランスポート実装

### 品質改善（P0/P1改善）
- P0改善7件（セキュリティ、MCP仕様準拠、CI/CD導入）
- P1改善8件（isError対応、FQCN自動検証テスト131件追加）

### ドキュメント整備（ドキュメント整備）
- ドキュメント再構成（読者別ガイド、INDEX.md作成）
- WSL2環境向けMCP Inspector手順

### 知識データ拡充
- 知識YAMLファイルを10→17ファイルに拡充
- ライブラリカバレッジ30%→85%

### Agent Skills導入（Agent Skills設計）
- 6件のエージェントスキルをClaude Code統合用に作成

### 連載記事シリーズ（連載記事・品質改善）
- 全17記事の専門家育成カリキュラム（5部構成）

---

## 3. ネクストアクション一覧（優先度付き）

### 🔴 高優先度

| # | アクション | 根拠 | 担当 |
|---|-----------|------|------|
| 1 | PR#74マージ（NablarchKnowledgeBase拡張 + 精度評価44テスト） | 精度評価の成果。検索対象7→14に拡張。マージ待ち。 | ステークホルダーの承認 |
| 2 | 知識データの実運用検証 | 実運用でデータバインド欠落が発見（2026-02-10）。拡充後の実地検証が必要 | プロジェクトリーダー |

### 🟡 中優先度

| # | アクション | 根拠 | 担当 |
|---|-----------|------|------|
| 3 | SpotBugs既存警告4件の解消 | 段階的解消予定だが未着手 | 担当者 |
| 4 | スキップテスト14件の改善検討 | ONNXモデル不在・DB接続不要テストの代替手段検討 | 担当者 |
| 5 | P2改善項目（品質評価レポート指摘） | 低優先度だが品質向上に寄与 | 担当者 |

### 🔵 低優先度（Phase 4関連）

| # | アクション | 根拠 | 担当 |
|---|-----------|------|------|
| 6 | Phase 4着手判断 | Phase 4計画で計画策定済み。着手保留中。 | プロジェクト判断 |
| 7 | Docker Composeデプロイ（Phase 4-1） | Phase 4最初のサブフェーズ | 担当者 |
| 8 | OAuth 2.0認証実装（Phase 4-2） | エンタープライズ対応 | 担当者 |

---

## 4. Phase 4ロードマップ概要

Phase 4計画にて42タスクの実装計画が策定済み（着手保留中）。

### サブフェーズ構成

| サブフェーズ | 内容 | タスク数 | 依存 |
|------------|------|---------|------|
| 4-1 | Docker Composeデプロイ | 約10件 | Phase 3完了 |
| 4-2 | 認証・セキュリティ | 約10件 | 4-1 |
| 4-3 | 取込パイプライン（GitHub/Javadoc） | 約12件 | 4-1 |
| 4-4 | モニタリング・運用 | 約10件 | 4-1 |

### 主要変更点（旧計画からの差分）
- 旧計画28タスク → 42タスクに再構築
- 既完了3件除外（Origin検証、CI/CD、isError対応 — P0/P1改善で実施済み）
- 不要化2件除外（ONNX移行関連 — プロジェクト方針でMCP Server方式確定）
- 新規19件追加（オブザーバビリティ14件 + 品質改善5件）

### 前提条件
- 着手承認
- Phase 3の全タスク完了（✅ 達成済み）

---

## 5. ドキュメント整合性監査結果

本タスク（プロジェクト状況調査）でドキュメント整合性監査を実施し、以下12件の乖離を発見・修正した。

| # | 対象 | 乖離内容 | 修正内容 |
|---|------|---------|---------|
| 1 | README.md | テスト件数表記が不正確 | 「941テスト（927成功、14スキップ）」に修正 |
| 2 | README.md | CI/CD導入がP0/P1に重複記載 | P1から削除 |
| 3 | README.md | 知識データYAML 17ファイルの情報が未記載 | 知識データ行を追加 |
| 4 | README.md | Agent Skills 6件の情報が未記載 | Agent Skills行を追加 |
| 5 | progress.md | テスト件数が古い（810件） | 941件に更新 |
| 6 | progress.md | PRマージ履歴が#61まで | #62〜#73を追加 |
| 7 | progress.md | 最終テスト実行日が古い | 2026-02-11に更新 |
| 8 | progress.md | P0/P1改善〜精度評価の成果が未反映 | 品質改善・知識拡充セクション追加 |
| 9 | wbs.md | Phase 3進捗率が76%（実態は100%） | 37/37 = 100%に修正 |
| 10 | wbs.md | 合計進捗率が古い（71%） | 99/127 = 78%に修正 |
| 11 | INDEX.md | Agent Skills情報が未記載 | Agent Skillsセクション追加 |
| 12 | INDEX.md | ディレクトリ構成図にskills未記載 | .claude/skills/を追加 |

---

*本レポートはドキュメント整合性監査の成果物として作成された。*
